SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=0
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=0
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=0]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=0, new payload ID=1
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=1
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 1 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 1, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 1: '{"WaitForAck":false,"Id":"1f4bec37-0b7c-4bcc-8f6a-1df7afac3956","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 1, stream : 0, eventKey: 'c-ede80e10-22d0-4447-ae2d-7ab056a7a496' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-ede80e10-22d0-4447-ae2d-7ab056a7a496
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=1
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=1
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=1]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=1, new payload ID=2
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=2
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 2 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 2, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 2: '{"WaitForAck":false,"Id":"2641ad56-c6aa-47d3-bbbf-367b009af9cc","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 2, stream : 0, eventKey: 'c-31bdd79b-b424-4981-af60-b4267bbd31a3' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-31bdd79b-b424-4981-af60-b4267bbd31a3
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=2]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=2, new payload ID=3
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=3
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 3 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 3, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 3: '{"WaitForAck":false,"Id":"12ac8390-aec8-4f7d-ba09-61fafff94736","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 3, stream : 0, eventKey: 'c-f0be1272-5229-4490-b97f-5ac4c2f269e6' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-f0be1272-5229-4490-b97f-5ac4c2f269e6
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=3]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=3, new payload ID=4
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=4
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 4 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 4, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 4: '{"WaitForAck":false,"Id":"c534e6bc-41b7-4566-991d-affcc61ad804","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 4, stream : 0, eventKey: 'c-31bdd79b-b424-4981-af60-b4267bbd31a3' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-31bdd79b-b424-4981-af60-b4267bbd31a3
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=4
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=4
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=4]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=4, new payload ID=5
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=5
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 5 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 5, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 5: '{"WaitForAck":false,"Id":"6f59c19f-0242-4116-8a46-2fc4bc458057","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 5, stream : 0, eventKey: 'c-cfc88f09-3f6b-47b6-958b-7ea571fffc97' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-cfc88f09-3f6b-47b6-958b-7ea571fffc97
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=5
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=5
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=5]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=5, new payload ID=6
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=6
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 6 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 6, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 6: '{"WaitForAck":false,"Id":"507e92e5-dae9-4deb-a8c6-5c1683fe4a1d","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 6, stream : 0, eventKey: 'c-28971529-9801-4376-a7fe-e655e105af70' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-28971529-9801-4376-a7fe-e655e105af70
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=6
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=6
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=6]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=6, new payload ID=7
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=7
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 7 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 7, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 7: '{"WaitForAck":false,"Id":"f6a9edb2-702a-4ab4-9520-667aa2cb4bb9","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 7, stream : 0, eventKey: 'c-28971529-9801-4376-a7fe-e655e105af70' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-28971529-9801-4376-a7fe-e655e105af70
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=7
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=7
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=7]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=7, new payload ID=8
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=8
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 8 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 8, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 8: '{"H":"NotificationHub","M":"statusUpdate","A":[[]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 8, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=8]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=8]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=8]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=8]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=8]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=8]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=8]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=8, new payload ID=9
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=9
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 9 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 9, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 9: '{"WaitForAck":false,"Id":"1b60a537-11fe-400f-9ad2-78fd28573641","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 9, stream : 0, eventKey: 'c-615f1a84-0acd-486b-ab38-fa1a8b9f93d6' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-615f1a84-0acd-486b-ab38-fa1a8b9f93d6
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=9
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=9
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=9]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=9, new payload ID=10
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=10
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 10 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 10, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 10: '{"WaitForAck":false,"Id":"9dfbc9e5-cc02-4e82-84a6-0825e416a61b","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 10, stream : 0, eventKey: 'c-615f1a84-0acd-486b-ab38-fa1a8b9f93d6' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-615f1a84-0acd-486b-ab38-fa1a8b9f93d6
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=10]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=10, new payload ID=11
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=11
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 11 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 11, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 11: '{"WaitForAck":false,"Id":"ea9e994d-ee57-4023-abd8-690595b4299b","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 11, stream : 0, eventKey: 'c-235cbc2b-58ea-421f-a894-5e0a32d33b0a' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-235cbc2b-58ea-421f-a894-5e0a32d33b0a
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=11]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=11, new payload ID=12
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=12
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 12 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 12, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 12: '{"H":"NotificationHub","M":"statusUpdate","A":[[]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 12, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=12]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=12, new payload ID=13
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=13
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 13 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 13, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 13: '{"H":"NotificationHub","M":"statusUpdate","A":[[]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 13, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=13]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=13, new payload ID=14
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=14
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 14 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 14, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 14: '{"H":"NotificationHub","M":"statusUpdate","A":[[]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 14, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 2
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=14]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=14, new payload ID=15
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=15
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 15 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 15, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 15: '{"H":"NotificationHub","M":"statusUpdate","A":[[]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 15, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 3
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=15]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=15, new payload ID=16
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=16
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 16 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 16, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 16: '{"H":"NotificationHub","M":"statusUpdate","A":[[]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 16, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 4
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Information: 0 : SQL message bus disposing, disposing streams
SignalR.SqlMessageBus Information: 0 : Stream 0 : Disposing stream 0
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver disposed
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Open to Closed
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=16
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=16
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=16]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=16, new payload ID=17
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=17
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 17 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 17, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 17: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"67771a84-548d-446c-8699-20e08f4a1a8d","Title":"33a2b830-28d1-4e6b-b148-f7004f95ef05","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 17, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=17]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=17, new payload ID=18
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=18
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 18 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 18, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 18: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"4ca97304-25dc-476f-9020-e3257e392e26","Title":"465ef2fe-5b2b-4e90-bcff-a75f324e755b","State":0},{"Id":"f8451a0d-fb25-4e82-abb4-8c894807064b","Title":"fb5cb7cb-5720-45c0-bc67-210467306008","State":0},{"Id":"98a49434-7847-4647-ba02-511c0c9a05af","Title":"af3cee6c-087e-4a7e-98ec-f60b1f5a2aeb","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 18, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=18, new payload ID=19
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=19
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 19 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 19, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 19: '{"WaitForAck":false,"Id":"fb91304f-5393-484f-987b-81341b494ec5","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 19, stream : 0, eventKey: 'c-676248c5-1c00-4a50-a2ea-7eaa38716914' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-676248c5-1c00-4a50-a2ea-7eaa38716914
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 2 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=19]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=19, new payload ID=20
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=20
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 20 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 20, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 20: '{"WaitForAck":false,"Id":"972a1966-44ab-483c-b810-52b4d87a400d","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 20, stream : 0, eventKey: 'c-676248c5-1c00-4a50-a2ea-7eaa38716914' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-676248c5-1c00-4a50-a2ea-7eaa38716914
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=20]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=20, new payload ID=21
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=21
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 21 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 21, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 21: '{"WaitForAck":false,"Id":"6d8b3817-897b-4b9b-bce7-d57264d14678","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 21, stream : 0, eventKey: 'c-38e59846-5e8d-4791-94a0-d4b076e74b75' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-38e59846-5e8d-4791-94a0-d4b076e74b75
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=21]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=21, new payload ID=22
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=22
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 22 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 22, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 22: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"ae153f20-182a-4cda-bf13-dc4e55a8c4fa","Title":"b13b2f69-9ea5-47d6-9c0c-9912739a4fe4","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 22, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 2
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=22]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=22, new payload ID=23
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=23
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 23 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 23, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 23: '{"WaitForAck":false,"Id":"3010ede8-6c49-474b-9613-1419ebae2a40","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 23, stream : 0, eventKey: 'c-38e59846-5e8d-4791-94a0-d4b076e74b75' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-38e59846-5e8d-4791-94a0-d4b076e74b75
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=23]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=23, new payload ID=24
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=24
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 24 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 24, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 24: '{"WaitForAck":false,"Id":"1dcfbacd-aedf-439e-b3b7-e20ac87e5b1a","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 24, stream : 0, eventKey: 'c-a8bd1939-e697-4393-814e-bc81e2284022' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-a8bd1939-e697-4393-814e-bc81e2284022
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=24]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=24, new payload ID=25
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=25
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 25 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 25, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 25: '{"WaitForAck":false,"Id":"bbae65be-2491-4cdd-a9f7-be0af38c5f14","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 25, stream : 0, eventKey: 'c-a8bd1939-e697-4393-814e-bc81e2284022' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-a8bd1939-e697-4393-814e-bc81e2284022
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=25]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=25, new payload ID=26
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=26
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 26 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 26, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 26: '{"WaitForAck":false,"Id":"a3e557fb-01b2-498d-83ee-bc9428f6681a","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 26, stream : 0, eventKey: 'c-4a579d11-b769-4e8b-9576-ad648f495fbf' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-4a579d11-b769-4e8b-9576-ad648f495fbf
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=26]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=26, new payload ID=27
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=27
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 27 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 27, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 27: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"257cdf1f-7286-4a1e-ab29-0a4a1609594b","Title":"e7a200e4-fafe-4068-b595-3cc29a8a957a","State":0},{"Id":"d9320f7d-65be-40e2-a8d7-02158b73ea81","Title":"951d1b4d-88e1-42ad-8176-f28341cfd60c","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 27, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 3
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=27]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=27, new payload ID=28
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=28
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 28 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 28, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 28: '{"WaitForAck":false,"Id":"af037775-97bc-4832-9bfa-5aadf3c087f2","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 28, stream : 0, eventKey: 'c-4a579d11-b769-4e8b-9576-ad648f495fbf' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-4a579d11-b769-4e8b-9576-ad648f495fbf
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=28]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=28, new payload ID=29
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=29
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 29 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 29, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 29: '{"WaitForAck":false,"Id":"3f7f6bda-e31c-4c66-920a-c889965c91c5","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 29, stream : 0, eventKey: 'c-eae30230-f700-425e-a8b2-f2960dcba161' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-eae30230-f700-425e-a8b2-f2960dcba161
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=29]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=29, new payload ID=30
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=30
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 30 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 30, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 30: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"21b84cea-55d7-45c9-95da-f2c54d063449","Title":"9ac15839-d7f3-41d3-b329-a056a752f670","State":0},{"Id":"5d332723-4875-4d11-861f-1b1eef620265","Title":"898583a8-c635-4274-ad53-b5e90704bc8a","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 30, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 4
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=30]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=30, new payload ID=31
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=31
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 31 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 31, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 31: '{"WaitForAck":false,"Id":"e03bfa4a-5ba7-4ebd-8246-2ab48fb55204","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 31, stream : 0, eventKey: 'c-eae30230-f700-425e-a8b2-f2960dcba161' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-eae30230-f700-425e-a8b2-f2960dcba161
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=31]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=31, new payload ID=32
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=32
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 32 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 32, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 32: '{"WaitForAck":false,"Id":"c2a997b5-6c63-4d25-9220-9465b0ea978e","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 32, stream : 0, eventKey: 'c-8e285bae-0540-4979-bef9-0cbee6f1c6aa' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-8e285bae-0540-4979-bef9-0cbee6f1c6aa
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=32, new payload ID=33
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=33
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 33 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 33, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 33: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"0954b3f5-50bc-44e1-aea7-216cb3763a7f","Title":"16e1b7cb-86aa-448f-bb46-b6c53b7520f3","State":0},{"Id":"a34c5e15-772d-4687-ad54-c0ac7b049295","Title":"9d022287-5efa-4fcc-88b1-a9558958858a","State":0},{"Id":"c32737ad-05d1-4b5e-b231-59496926a897","Title":"3c6b84da-bbec-425e-84c4-22f71ea45c93","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 33, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 5
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 2 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=33]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=33, new payload ID=34
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=34
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 34 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 34, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 34: '{"WaitForAck":false,"Id":"7bfc050e-7eb0-41a0-b335-f640e61ceb27","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 34, stream : 0, eventKey: 'c-8e285bae-0540-4979-bef9-0cbee6f1c6aa' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-8e285bae-0540-4979-bef9-0cbee6f1c6aa
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=34]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=34, new payload ID=35
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=35
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 35 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 35, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 35: '{"WaitForAck":false,"Id":"2687b2a9-f8fe-425d-968b-9ce8ee70cff8","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 35, stream : 0, eventKey: 'c-74d5bad5-b598-45aa-bfb6-4db7df2bcbb1' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-74d5bad5-b598-45aa-bfb6-4db7df2bcbb1
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=35]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=35, new payload ID=36
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=36
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 36 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 36, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 36: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"9c26684f-095f-441a-bbb7-fa9521419df1","Title":"7acb6150-c66c-4a07-9f62-6e547ee26ede","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 36, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 6
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=36]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=36, new payload ID=37
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=37
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 37 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 37, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 37: '{"WaitForAck":false,"Id":"2f21096f-2086-4495-862e-a6a63b82e95d","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 37, stream : 0, eventKey: 'c-74d5bad5-b598-45aa-bfb6-4db7df2bcbb1' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-74d5bad5-b598-45aa-bfb6-4db7df2bcbb1
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=37]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=37, new payload ID=38
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=38
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 38 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 38, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 38: '{"WaitForAck":false,"Id":"7c42306f-12cb-4e7c-9f63-ed2846509025","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 38, stream : 0, eventKey: 'c-a48caf3d-e8a6-4421-bdf2-ceda61d77bd3' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-a48caf3d-e8a6-4421-bdf2-ceda61d77bd3
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=38]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=38]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=38]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=38]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=38]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=38]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=38]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=38, new payload ID=39
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=39
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 39 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 39, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 39: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"8fd2e202-352a-461b-9cc9-195955845b62","Title":"277e4d30-01ab-4773-b0d5-206bcf3465ef","State":0},{"Id":"7bc7cfa1-87e5-471a-a74e-057fb4ad0806","Title":"8b0aac93-0183-4853-86aa-2af9bc0558e8","State":0},{"Id":"b5a9bfba-b91a-4b2c-93a7-4b66bb33db47","Title":"d201910d-2ef4-4c96-bf3f-3c63af0c5262","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 39, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 7
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=39]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=39, new payload ID=40
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=40
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 40 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 40, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 40: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"cefb82c0-9f16-4dae-82a3-01917c4f5846","Title":"ac3df25f-4ca0-498d-b6cf-e35db43e6b21","State":0},{"Id":"68f5669a-9713-435e-a3fd-d0e110f10963","Title":"302b519b-fc39-45d4-9c1b-6b9fc838e59b","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 40, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 8
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=40]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=40, new payload ID=41
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=41
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 41 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 41, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 41: '{"WaitForAck":false,"Id":"91164e2d-7c92-4aa6-805a-9181688f7681","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 41, stream : 0, eventKey: 'c-045c1bed-3b96-4dab-a698-995e4847dc97' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-045c1bed-3b96-4dab-a698-995e4847dc97
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=41]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=41, new payload ID=42
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=42
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 42 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 42, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 42: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"1ce18fe9-bce3-4d51-91cb-7826ca3c7876","Title":"0e374f9c-84a6-4124-bae6-9586eb47e5a9","State":0},{"Id":"e912e013-e357-4d52-9586-a4acff413b6f","Title":"2cbf6c1d-745a-474d-bed8-3900d790f6e4","State":0},{"Id":"f0d5997a-c176-4b52-809b-7ae0c09fa809","Title":"f0255052-c421-4d45-80c7-f930fde859f7","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 42, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 9
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=42]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=42, new payload ID=43
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=43
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 43 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 43, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 43: '{"WaitForAck":false,"Id":"49ea77b8-d8c7-4a54-977e-f0e3e3c34185","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 43, stream : 0, eventKey: 'c-2358575c-3d5a-4243-a9cb-e378abcef464' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-2358575c-3d5a-4243-a9cb-e378abcef464
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=43]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=43, new payload ID=44
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=44
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 44 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 44, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 44: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"1069343f-9d85-4c30-a2e2-ae8d0b9fd211","Title":"19a010a6-12f0-46c3-b529-484aa67897a2","State":0},{"Id":"017f93c1-0169-4f1c-ba5c-05f1dfcb7c39","Title":"eb3bbf45-90ac-4ab8-9348-cc49746a3d79","State":0},{"Id":"fc944edf-59b5-4e98-984c-25fd8a51574f","Title":"7f71bc45-d1af-4861-8a87-4421b2cfaf31","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 44, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 10
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=44]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=44, new payload ID=45
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=45
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 45 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 45, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 45: '{"WaitForAck":false,"Id":"e0a1098f-0abd-4d00-a8b3-61c9f824a16a","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 45, stream : 0, eventKey: 'c-533f9160-ab0b-4782-bca5-9bba83379c04' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-533f9160-ab0b-4782-bca5-9bba83379c04
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=45]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=45, new payload ID=46
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=46
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 46 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 46, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 46: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"65f7cf47-1e13-455b-9444-2f77078a8a3e","Title":"a87cc137-9add-4e4f-8246-d2d9207b4197","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 46, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 11
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=46]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=46, new payload ID=47
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=47
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 47 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 47, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 47: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"60b4536e-7c6d-4e88-b89b-858312b025ba","Title":"c179c939-2fab-4207-bd9a-087a839f8b28","State":0},{"Id":"22ddfd02-4575-4984-804e-322fed79debc","Title":"063c0558-dc26-4c62-9fe2-3bba766761b4","State":0},{"Id":"312262db-a1e5-42f8-bb9f-868ad4cc27e9","Title":"523463a1-2fbd-4016-bef2-d1c18c102063","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 47, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 12
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=47]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=47, new payload ID=48
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=48
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 48 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 48, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 48: '{"WaitForAck":false,"Id":"1f4c2389-e39b-4bc4-abf6-1696807292e5","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 48, stream : 0, eventKey: 'c-533f9160-ab0b-4782-bca5-9bba83379c04' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-533f9160-ab0b-4782-bca5-9bba83379c04
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=48]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=48, new payload ID=49
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=49
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 49 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 49, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 49: '{"WaitForAck":false,"Id":"dcf074ca-166c-48a2-850d-4fecb464d4e2","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 49, stream : 0, eventKey: 'c-3e8adfc8-781f-460a-be7e-a64be8b3e2ab' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-3e8adfc8-781f-460a-be7e-a64be8b3e2ab
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=49]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=49, new payload ID=50
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=50
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 50 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 50, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 50: '{"WaitForAck":false,"Id":"f4667c90-afe7-471f-b654-451e569fba0e","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 50, stream : 0, eventKey: 'c-3e8adfc8-781f-460a-be7e-a64be8b3e2ab' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-3e8adfc8-781f-460a-be7e-a64be8b3e2ab
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=50]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=50, new payload ID=51
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=51
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 51 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 51, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 51: '{"WaitForAck":false,"Id":"315d50c8-bd0b-4e17-9146-b226b49700c9","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 51, stream : 0, eventKey: 'c-d0eb7adc-22a8-46e1-a4ec-61970f45aedc' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-d0eb7adc-22a8-46e1-a4ec-61970f45aedc
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=51]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=51, new payload ID=52
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=52
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 52 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 52, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 52: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"29ccd46c-5af9-4601-ba35-f08231041c0e","Title":"07dc9c73-15e3-42a6-9ef3-ee65c875c861","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 52, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 13
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=52]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=52, new payload ID=53
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=53
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 53 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 53, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 53: '{"WaitForAck":false,"Id":"659a7e72-104a-4678-8204-a4f26d6f44d0","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 53, stream : 0, eventKey: 'c-d0eb7adc-22a8-46e1-a4ec-61970f45aedc' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-d0eb7adc-22a8-46e1-a4ec-61970f45aedc
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=53]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=53, new payload ID=54
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=54
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 54 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 54, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 54: '{"WaitForAck":false,"Id":"8ee35340-fc4e-4514-af6f-1415f12157b8","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 54, stream : 0, eventKey: 'c-4c8fe267-684b-4a1a-ab77-faa9fbfa71fa' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-4c8fe267-684b-4a1a-ab77-faa9fbfa71fa
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=54]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=54, new payload ID=55
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=55
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 55 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 55, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 55: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"ca08e6da-c845-41cd-8e45-428112316279","Title":"9dfbaddc-e467-4bc7-a0d3-64826448f4fa","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 55, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 14
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=55]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=55, new payload ID=56
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=56
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 56 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 56, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 56: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"ccb16bf3-2806-4962-a55a-bab6cc9520a7","Title":"97f36c63-9b71-4c78-86b9-9013f3bd8d87","State":0},{"Id":"010eecbe-5371-4211-9460-745992a8b2f2","Title":"c2237d56-cba7-443a-a3af-99600c123d68","State":0},{"Id":"ac1cbf8d-b650-41bb-8962-b973d4e0979e","Title":"997598fc-2d36-4420-ad7b-87087f5fcc9f","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 56, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 15
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : SQL message bus disposing, disposing streams
SignalR.SqlMessageBus Information: 0 : Stream 0 : Disposing stream 0
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver disposed
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Open to Closed
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=56
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=56
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : SQL message bus disposing, disposing streams
SignalR.SqlMessageBus Information: 0 : Stream 0 : Disposing stream 0
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver disposed
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Open to Closed
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=56
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=56
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=56]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=56, new payload ID=57
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=57
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 57 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 57, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 57: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"c5013fd9-9e7c-45a4-af43-20d555e3f08b","Title":"435a074e-cdf5-483b-b12c-e867b99799dc","State":0},{"Id":"ab8cbb7c-5fb3-41e3-a9fc-78b23086df23","Title":"8d40a291-245e-4f31-b538-3bfff34fad72","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 57, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=57]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=57, new payload ID=58
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=58
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 58 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 58, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 58: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"56bfad6e-1e4f-4ddb-8d3a-ab62a0b9249a","Title":"ea1b3e36-283e-4cc3-8018-e4536b2268d0","State":0},{"Id":"c5d0cf37-c0a9-4985-8d99-13fc33d62b8a","Title":"f7ff6f95-10fc-4178-99db-76f0fb08efb6","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 58, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=58]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=58, new payload ID=59
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=59
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 59 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 59, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 59: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"cec05b3f-5388-43c5-b20d-cb630253c6cd","Title":"f4f364da-7cde-4ca9-92c0-de7f7d6ba3db","State":0},{"Id":"ca7dd5af-7448-4883-aed4-39944a586288","Title":"c257af4a-02ef-4617-81b9-4fc6ce28a3ca","State":0},{"Id":"0047f6f8-d378-4ff4-a25b-114c8352e126","Title":"5710decc-44c9-4dd4-aa0c-98c379e8921f","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 59, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 2
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=59, new payload ID=60
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=60
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 60 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 60, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 60: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"dd86641b-53a0-42b8-ba41-b99e9a7fe135","Title":"844b8875-0e2c-44e6-90ac-e4303af9c3bd","State":0},{"Id":"9b51f652-acfa-48de-b89e-35e02af11a92","Title":"20f87b1a-b044-465c-a1d1-928b67d1aa5e","State":0},{"Id":"d293edb0-c788-4a77-91eb-6a2a1d8df473","Title":"e59fc9d8-802a-44be-9419-c84330c5c2a0","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 60, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 3
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=60, new payload ID=61
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=61
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 61 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 61, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 61: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"fb75822f-8419-4766-9b73-65b67da269ac","Title":"7c42b445-c727-42ab-9aa0-ac081187d987","State":0},{"Id":"57b05c40-1243-43b5-9eeb-1f1fab3632b0","Title":"a60c1a32-f0f0-43dc-9160-9e2e7409c64a","State":0},{"Id":"a8000f3e-f119-4196-89a6-a244edf41148","Title":"30bc01b5-78c4-4333-905a-5c6e394802fa","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 61, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 4
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=61, new payload ID=62
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=62
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 62 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 62, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 62: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"7102f726-fc0d-4ffe-a6a0-8ea10a1b7bb4","Title":"2c2be006-1a7a-4ebe-94f2-7f44d6fb7c17","State":0},{"Id":"d103a1aa-b3e7-4c12-9aab-2ea3cd4ee016","Title":"7db70f9a-c956-48de-a676-228ab6a34670","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 62, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 5
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 4 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification details: Type=Change, Source=Data, Info=Update
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=62]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=62, new payload ID=63
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=63
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 63 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 63, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 63: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"ebf9022d-9340-458d-97da-e8cbae439e0d","Title":"6895bc1a-4ccf-4b98-acfc-190ff7d7fcd6","State":0},{"Id":"efe202da-6d9b-4956-ab60-83cb312e511f","Title":"ce4def48-c9b1-4913-ba04-8b850ab31106","State":0},{"Id":"f76ce112-c664-4857-bd06-100d14999ef5","Title":"ab268f4d-2fc0-4573-b80e-f4b20a6d0b97","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 63, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 6
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=63]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=66
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=66
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=66]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=66, new payload ID=67
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=67
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 67 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 67, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 67: '{"WaitForAck":false,"Id":"f664ff1c-ec34-40f3-ae91-d2bf602d6793","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 67, stream : 0, eventKey: 'c-943ec4e9-a3a3-4790-bf6d-298407c69e24' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-943ec4e9-a3a3-4790-bf6d-298407c69e24
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=67, new payload ID=68
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=68
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 68 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 68, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 68: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"139612c1-df8b-41e7-b03e-d4e501e60d80","Title":"232f36ed-b1df-4b2c-a992-7c13fbddaa68","State":0},{"Id":"a78a4d83-301b-40ac-997d-9bae06e9e171","Title":"3a717e51-8c06-470c-8ef1-773185c0826a","State":0},{"Id":"b133e27a-fc92-45a3-b9bc-08e382d05938","Title":"3d836249-ed1e-4b34-8e41-292614cc41e7","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 68, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 2 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=68
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=68
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=68]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=68, new payload ID=69
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=69
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 69 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 69, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 69: '{"WaitForAck":false,"Id":"9f632a4f-63bb-4b27-8692-919eed0ce94a","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 69, stream : 0, eventKey: 'c-e90de1bd-96d4-414c-9458-1109dcd2a6de' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-e90de1bd-96d4-414c-9458-1109dcd2a6de
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : Stream 0 : SqlReceiver.Receive returned
SignalR.SqlMessageBus Information: 0 : Stream 0 : SQL notification change fired
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification timed out
SignalR.SqlMessageBus Information: 0 : Stream 0 : Starting receive loop again to process updates
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener was already running
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=69]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=69, new payload ID=70
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=70
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 70 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 70, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 70: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"28692c58-61cc-44f3-9682-83c7e87d1ba6","Title":"978b48f8-8250-4132-b60d-7e43ec9d60c7","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 70, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=70]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=70, new payload ID=71
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=71
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 71 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 71, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 71: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"ccba046f-1e79-426e-849a-301e7ba7e42a","Title":"802784e0-88f2-421b-af1f-b5c37942a2a1","State":0},{"Id":"204faf40-8780-4411-bde1-3ab228970a5c","Title":"48807d32-3b45-404c-943f-a7eb0072e36c","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 71, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=71]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=71, new payload ID=72
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=72
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 72 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 72, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 72: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"44a0574f-c62d-4390-8ce8-adc22a06843f","Title":"8a0fc5ff-a8d3-446c-9646-49fa04ef31d3","State":0},{"Id":"8377ba28-f57b-4908-972b-001fb0f2aa0f","Title":"29d342a9-1a75-4994-bff2-5af276083b47","State":0},{"Id":"0e9072c4-cee5-416e-bb9d-ba5c08089288","Title":"35ecece6-6162-4bab-a6cb-75c89572c607","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 72, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 2
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=72]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=72, new payload ID=73
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=73
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 73 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 73, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 73: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"c1477546-73ce-476a-b98a-988ebd46743e","Title":"27d6882d-8354-45ee-bde0-03b32f8c715e","State":0},{"Id":"e5f8d812-27ba-47a2-bade-77d1c514c1d9","Title":"582d8e3f-6bd6-4ba6-8ef0-4d9e70448b42","State":0},{"Id":"9588f966-73df-419d-96f6-5128e56d9a19","Title":"9299985b-58bb-4b7b-ba88-e029026502d1","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 73, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 3
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 3000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received while setting up SQL notification
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Receive loop exiting
SignalR.SqlMessageBus Information: 0 : SQL message bus initializing, TableCount=1
SignalR.SqlMessageBus Information: 0 : Start installing SignalR SQL objects
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT SERVERPROPERTY ( 'EngineEdition' ), Parameters=
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText= -- Copyright (c) .NET Foundation. All rights reserved.
 -- Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

DECLARE @SCHEMA_NAME nvarchar(32),
		@SCHEMA_TABLE_NAME nvarchar(100),
		@TARGET_SCHEMA_VERSION int,
		@MESSAGE_TABLE_NAME nvarchar(100),
		@MESSAGE_TABLE_COUNT int,
        @CREATE_MESSAGE_TABLE_DDL nvarchar(1000),
		@CREATE_MESSAGE_ID_TABLE_DDL nvarchar(1000);

SET @SCHEMA_NAME = 'SignalR';
SET @SCHEMA_TABLE_NAME = 'Schema';
SET @TARGET_SCHEMA_VERSION = 1;
SET @MESSAGE_TABLE_COUNT = 1;
SET @MESSAGE_TABLE_NAME = 'Messages';
SET @CREATE_MESSAGE_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName](
    [PayloadId] [bigint] NOT NULL,
	[Payload] [varbinary](max) NOT NULL,
	[InsertedOn] [datetime] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);'
SET @CREATE_MESSAGE_ID_TABLE_DDL =
N'CREATE TABLE [' + @SCHEMA_NAME + N'].[@TableName] (
    [PayloadId] [bigint] NOT NULL,
	PRIMARY KEY CLUSTERED ([PayloadId] ASC)
);
-- Initialize PayloadId row with value 0
INSERT INTO [' + @SCHEMA_NAME + N'].[@TableName] (PayloadId) VALUES (0);';

PRINT 'Installing SignalR SQL objects';

SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
BEGIN TRANSACTION;

-- Create the DB schema if it doesn't exist
IF NOT EXISTS(SELECT [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME)
	BEGIN
		BEGIN TRY
			EXEC(N'CREATE SCHEMA [' + @SCHEMA_NAME + '];');
			PRINT 'Created database schema [' + @SCHEMA_NAME  + ']';
		END TRY
		BEGIN CATCH
            DECLARE @ErrorNumber int,
                    @ErrorSeverity int,
                    @ErrorState int;

            SELECT @ErrorNumber = ERROR_NUMBER(),
                   @ErrorSeverity = ERROR_SEVERITY(),
                   @ErrorState = ERROR_STATE();

			IF @ErrorNumber = 2759
				-- If it's an object already exists error then ignore
				PRINT 'Database schema [' + @SCHEMA_NAME + '] already exists'
			ELSE
				RAISERROR (@ErrorNumber, @ErrorSeverity, @ErrorState);
		END CATCH;
	END
ELSE
	PRINT 'Database schema [' + @SCHEMA_NAME  + '] already exists';

DECLARE @SCHEMA_ID int;
SELECT @SCHEMA_ID = [schema_id] FROM [sys].[schemas] WHERE [name] = @SCHEMA_NAME;

-- Create the SignalR_Schema table if it doesn't exist
IF NOT EXISTS(SELECT [object_id] FROM [sys].[tables] WHERE [name] = @SCHEMA_TABLE_NAME AND [schema_id] = @SCHEMA_ID)
	BEGIN
		-- Create the empty SignalR schema table
		EXEC(N'CREATE TABLE [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']('+
			 N'[SchemaVersion] [int] NOT NULL,'+
			 N'PRIMARY KEY CLUSTERED ([SchemaVersion] ASC)'+
		     N')');
		PRINT 'Created table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + ']';
	END
ELSE
	PRINT 'Table [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] already exists';

DECLARE @GET_SCHEMA_VERSION_SQL nvarchar(1000);
SET @GET_SCHEMA_VERSION_SQL = N'SELECT @schemaVersion = [SchemaVersion] FROM [' + @SCHEMA_NAME  + N'].[' + @SCHEMA_TABLE_NAME + N']';

DECLARE @CURRENT_SCHEMA_VERSION int;
EXEC sp_executesql @GET_SCHEMA_VERSION_SQL, N'@schemaVersion int output',
	@schemaVersion = @CURRENT_SCHEMA_VERSION output;

PRINT 'Current SignalR schema version: ' + CASE @CURRENT_SCHEMA_VERSION WHEN NULL THEN 'none' ELSE CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) END;

-- Install tables, etc.
IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION <= @TARGET_SCHEMA_VERSION
	BEGIN
		IF @CURRENT_SCHEMA_VERSION IS NULL OR @CURRENT_SCHEMA_VERSION = @TARGET_SCHEMA_VERSION
			BEGIN
				-- Install version 1
				PRINT 'Installing schema version 1';
				
                DECLARE @counter int;
				SET @counter = 0;
				WHILE @counter < @MESSAGE_TABLE_COUNT
					BEGIN
						DECLARE @table_name nvarchar(100);
						DECLARE @ddl nvarchar(max);
						
						-- Create the message table
						SET @table_name = @MESSAGE_TABLE_NAME + '_' + CONVERT(nvarchar, @counter);
						SET @ddl = REPLACE(@CREATE_MESSAGE_TABLE_DDL, '@TableName', @table_name);
						
						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
									    AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message table [' + @SCHEMA_NAME + '].[' + @table_name + ']';
							END
						ELSE
							PRINT 'Mesage table [' + @SCHEMA_NAME + '].[' + @table_name + '] already exists';

						-- Create the id table
						SET @table_name = @table_name + '_Id';
						SET @ddl = REPLACE(@CREATE_MESSAGE_ID_TABLE_DDL, '@TableName', @table_name);

						IF NOT EXISTS(SELECT [object_id]
									  FROM [sys].[tables]
									  WHERE [name] = @table_name
										AND [schema_id] = @SCHEMA_ID)
							BEGIN
								EXEC(@ddl);
								PRINT 'Created message ID table [' + @SCHEMA_NAME + '].[PayloadId]';
							END
						ELSE
							PRINT 'Message ID table [' + @SCHEMA_NAME + '].[' + @table_name + '] alread exists';

						SET @counter = @counter + 1;
					END
				
				IF @CURRENT_SCHEMA_VERSION IS NULL
					BEGIN
						DECLARE @insert_dml nvarchar(1000);
						SET @CURRENT_SCHEMA_VERSION = 1;
						SET @insert_dml = 'INSERT INTO [' + @SCHEMA_NAME  + '].[' + @SCHEMA_TABLE_NAME + '] ([SchemaVersion]) VALUES(' + CONVERT(nvarchar, @CURRENT_SCHEMA_VERSION) + ')';
						EXEC(@insert_dml);
					END
				
				PRINT 'Schema version 1 installed';
			END
		/*IF @CURRENT_SCHEMA_VERSION = 1
			BEGIN
				-- Update to version 2
				-- TODO: Add schema updates here when we go to v2
				SELECT GETDATE() -- dummy
			END*/

		COMMIT TRANSACTION;

		PRINT 'SignalR SQL objects installed';
	END

ELSE -- @CURRENT_SCHEMA_VERSION > @TARGET_SCHEMA_VERSION
	BEGIN
		-- Configured SqlMessageBus is lower version than current DB schema, just bail out
		ROLLBACK TRANSACTION;
		RAISERROR(N'SignalR database current schema version %d is newer than the configured SqlMessageBus schema version %d. Please update to the latest Microsoft.AspNet.SignalR.SqlServer NuGet package.', 11, 1,
			@CURRENT_SCHEMA_VERSION, @TARGET_SCHEMA_VERSION);
	END, Parameters=
SignalR.SqlMessageBus Information: 0 : SignalR SQL objects installed
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId] FROM [SignalR].[Messages_0_Id], Parameters=
SignalR.ScaleoutMessageBus Information: 0 : Stream(0) - Changed state from Initial to Open
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver started, initial payload id=73
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Executing receive reader, initial payload ID parameter=73
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Starting SQL notification listener
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SQL notification listener started
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=73]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=73, new payload ID=74
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=74
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 74 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 74, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 74: '{"WaitForAck":false,"Id":"b7b41069-f33f-46fc-9352-0784e654782e","CommandType":3,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 74, stream : 0, eventKey: 'c-e90de1bd-96d4-414c-9458-1109dcd2a6de' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-e90de1bd-96d4-414c-9458-1109dcd2a6de
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Saving payload with 1 messages(s) to SQL server
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=74]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=74, new payload ID=75
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=75
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 75 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 75, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 75: '{"WaitForAck":false,"Id":"ea8bd575-a891-4456-86b7-c46a8fd4a228","CommandType":0,"Value":null}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 75, stream : 0, eventKey: 'c-7a14fdda-512e-443e-b6c6-f13853b7f973' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: c-7a14fdda-512e-443e-b6c6-f13853b7f973
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=75]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=75, new payload ID=76
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=76
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 76 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 76, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 76: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"b322b979-4c83-4ae2-b34a-f91c55d1a053","Title":"bfa77a1c-eaae-40e1-90e4-5dd19717198b","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 76, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 0
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=76]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : SqlReceiver last payload ID=76, new payload ID=77
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Updated receive reader initial payload ID parameter=77
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Payload 77 containing 1 message(s) received
SignalR.ScaleoutMessageBus Information: 0 : OnReceived(0, 77, 1)
SignalR.ScaleoutMessageBus Verbose: 0 : Received message 77: '{"H":"NotificationHub","M":"statusUpdate","A":[[{"Id":"caf0ff15-dbc3-44a0-ad50-f81a37f66f62","Title":"70963873-cf7a-4e8d-baae-ce80c9f73ac0","State":0},{"Id":"6b9c8019-6a1a-4e84-a9e5-1b2bced30c13","Title":"c548c5fd-87ed-4a2f-88d1-bf47e1789f69","State":0}]]}' over ScaleoutMessageBus
SignalR.ScaleoutMessageBus Verbose: 0 : Message id: 77, stream : 0, eventKey: 'h-NotificationHub' saved with local id: 1
SignalR.ScaleoutMessageBus Verbose: 0 : Scheduling eventkeys: h-NotificationHub
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : 1 records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 10ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 50ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 100ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 200ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1000ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
SignalR.SqlMessageBus Verbose: 0 : Created DbCommand: CommandType=Text, CommandText=SELECT [PayloadId], [Payload], [InsertedOn] FROM [SignalR].[Messages_0] WHERE [PayloadId] > @PayloadId, Parameters= [Name=PayloadId, Value=77]
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : No records received
SignalR.SqlMessageBus Verbose: 0 : Stream 0 : Waiting 1500ms before checking for messages again
